<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DRP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Search CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
  
  <!-- jQuery (REQUIRED for Select2) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <!-- Main CSS -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body>

<!-- HEADER -->
<div id="header"></div>

<!-- BODY -->
<div class="container-fluid">
  <div class="row">

    <!-- LEFT PANEL -->
    <!-- LEFT PANEL -->
    <aside class="col-md-3 col-lg-2 sidebar p-0" id="sidebar-placeholder">
      <!-- Sidebar will be loaded here -->
    </aside>

    <!-- MAIN CONTENT -->
    <main class="col-md-9 col-lg-10 p-4">
      <div class="card shadow-sm border-1">
        <div class="card-body">
          <h4 class="card-title mb-3">BORANG DISTRICT RISK PROFILE</h4>
          <p class="card-text text-muted">
            Laman utama untuk papan pemuka, pelaporan dan analitik.
          </p>
        </div>
        <div class="card-body">
        <div class="mb-4">
            <ul class="nav nav-pills justify-content-center" id="stepIndicator">
                <li class="nav-item">
                    <button type="button" class="nav-link active" data-step="0">1</button>
                </li>
                <li class="nav-item">
                    <button type="button" class="nav-link" data-step="1">2</button>
                </li>
            </ul>
        </div>
        
        <form id="wizardForm" novalidate>
        <!-- ================= STEP 1 ================= -->
        <div class="wizard-step active">
            <h5 class="mb-3">BAHAGIAN 1 : MAKLUMAT ASAS</h5>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label required">KATEGORI</label>
                    <select id="kategori" name="kategori" class="form-select" required>
                        <option value="NATURAL DISASTER">NATURAL DISASTER</option>
                        <option value="TECHNOLOGICAL DISASTER">TECHNOLOGICAL DISASTER</option>
                        <option value="OUTBREAK">OUTBREAK</option>
                        <option value="CRISIS">CRISIS</option>
                        <option value="EMERGENCY">EMERGENCY</option>
                    </select>
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-6">
                <label class="form-label">Negeri</label>
                <select class="form-select" id="negeri_drp" name="negeri_drp" required>
                <option value="">-- Sila Pilih Negeri --</option>
                </select>
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-6">
                <label class="form-label">Daerah</label>
                <select class="form-select" id="daerah_drp" name="daerah_drp" required>
                    <option value="">-- Sila Pilih Daerah --</option>
                    <option value="Lain-Lain">Lain-lain</option>
                </select>
                </div>
            
                <div class="col-md-6 d-none" id="daerahLainWrapperDRP">
                <label class="form-label">Sila Nyatakan Daerah</label>
                <input
                    type="text"
                    class="form-control"
                    id="daerahLainDRP"
                    name="daerahLainDRP"
                    placeholder="Nama Daerah"
                >
                </div>
            </div>
            
            <div class="mb-3">
                <div class="col-md-6">
                    <label class="form-label required">Mukim</label>
                    <input id="mukim" name="mukim" class="form-control text-uppercase">
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Alamat Penuh</label>
                <textarea id="alamatLokasiDRP" class="form-control" rows="2" placeholder="Contoh: Klinik Kesihatan Putrajaya"></textarea>
            </div>

            <button type="button" class="btn btn-outline-primary btn-sm mb-3" id="cariLokasiDRP">Cari Lokasi Berdasarkan Alamat</button>

            <div id="map_drp" style="height:350px;"></div>

            <!-- Simpan koordinat -->
            <input type="hidden" name="latitude_drp" id="latitude_drp" required>
            <input type="hidden" name="longitude_drp" id="longitude_drp" required>

            <!-- Display koordinat live -->
            <div class="mt-2">
            <strong>Latitude:</strong> <span id="latDisplayDRP">-</span> |
            <strong>Longitude:</strong> <span id="lngDisplayDRP">-</span>
            </div>
            </div>
            
            <!-- ================= STEP 2 ================= -->
            <div class="wizard-step">
            <h5 class="mb-3">BAHAGIAN 2 : RISIKO</h5>

            <div class="row g-3 mb-3">
                <div class="col-md-6">
                <label class="form-label">Jenis Bencana</label>
                <select class="form-select" id="disasterType" name="disasterType" required></select>
                </div>
                <div class="col-md-6 d-none" id="disasterLainWrapper">
                <label class="form-label">Sila nyatakan bencana</label>
                <input type="text" class="form-control" id="disasterLain" name="disasterLain" placeholder="Contoh: Tsunami">
                </div>
            </div>

            <!-- LIKELIHOOD -->
            <div class="mb-3">
                <label class="form-label required">Likelihood</label>
                <div class="rating-group" id="likelihood">
                <label class="rating-label" style="background:#FF0000"><input type="radio" name="likelihood" value="1"><span>1</span></label>
                <label class="rating-label" style="background:#FF4500"><input type="radio" name="likelihood" value="2"><span>2</span></label>
                <label class="rating-label" style="background:#FFA500"><input type="radio" name="likelihood" value="3"><span>3</span></label>
                <label class="rating-label" style="background:#9ACD32"><input type="radio" name="likelihood" value="4"><span>4</span></label>
                <label class="rating-label" style="background:#008000"><input type="radio" name="likelihood" value="5"><span>5</span></label>
                </div>
            </div>

            <!-- IMPACT -->
            <h6 class="mt-4">Impact</h6>
            <div class="row g-3">
                <div class="col-md-4 mb-3">
                <label class="form-label required">MORTALITY</label>
                <div class="rating-group" id="mortality">
                    <label class="rating-label" style="background:#FF0000"><input type="radio" name="mortality" value="1"><span>1</span></label>
                    <label class="rating-label" style="background:#FF4500"><input type="radio" name="mortality" value="2"><span>2</span></label>
                    <label class="rating-label" style="background:#FFA500"><input type="radio" name="mortality" value="3"><span>3</span></label>
                    <label class="rating-label" style="background:#9ACD32"><input type="radio" name="mortality" value="4"><span>4</span></label>
                    <label class="rating-label" style="background:#008000"><input type="radio" name="mortality" value="5"><span>5</span></label>
                </div>
                </div>

                <div class="col-md-4 mb-3">
                <label class="form-label required">MORBIDITY</label>
                <div class="rating-group" id="morbidity">
                    <label class="rating-label" style="background:#FF0000"><input type="radio" name="morbidity" value="1"><span>1</span></label>
                    <label class="rating-label" style="background:#FF4500"><input type="radio" name="morbidity" value="2"><span>2</span></label>
                    <label class="rating-label" style="background:#FFA500"><input type="radio" name="morbidity" value="3"><span>3</span></label>
                    <label class="rating-label" style="background:#9ACD32"><input type="radio" name="morbidity" value="4"><span>4</span></label>
                    <label class="rating-label" style="background:#008000"><input type="radio" name="morbidity" value="5"><span>5</span></label>
                </div>
                </div>

                <div class="col-md-4 mb-3">
                <label class="form-label required">ECONOMIC BURDEN</label>
                <div class="rating-group" id="economic_burden">
                    <label class="rating-label" style="background:#FF0000"><input type="radio" name="economic_burden" value="1"><span>1</span></label>
                    <label class="rating-label" style="background:#FF4500"><input type="radio" name="economic_burden" value="2"><span>2</span></label>
                    <label class="rating-label" style="background:#FFA500"><input type="radio" name="economic_burden" value="3"><span>3</span></label>
                    <label class="rating-label" style="background:#9ACD32"><input type="radio" name="economic_burden" value="4"><span>4</span></label>
                    <label class="rating-label" style="background:#008000"><input type="radio" name="economic_burden" value="5"><span>5</span></label>
                </div>
                </div>

                <div class="col-md-4 mb-3">
                <label class="form-label required">HEALTHCARE SYSTEM IMPACT</label>
                <div class="rating-group" id="healthcare_system_impact">
                    <label class="rating-label" style="background:#FF0000"><input type="radio" name="healthcare_system_impact" value="1"><span>1</span></label>
                    <label class="rating-label" style="background:#FF4500"><input type="radio" name="healthcare_system_impact" value="2"><span>2</span></label>
                    <label class="rating-label" style="background:#FFA500"><input type="radio" name="healthcare_system_impact" value="3"><span>3</span></label>
                    <label class="rating-label" style="background:#9ACD32"><input type="radio" name="healthcare_system_impact" value="4"><span>4</span></label>
                    <label class="rating-label" style="background:#008000"><input type="radio" name="healthcare_system_impact" value="5"><span>5</span></label>
                </div>
                </div>

                <div class="col-md-4 mb-3">
                <label class="form-label required">SOCIAL DISRUPTION</label>
                <div class="rating-group" id="social_disruption">
                    <label class="rating-label" style="background:#FF0000"><input type="radio" name="social_disruption" value="1"><span>1</span></label>
                    <label class="rating-label" style="background:#FF4500"><input type="radio" name="social_disruption" value="2"><span>2</span></label>
                    <label class="rating-label" style="background:#FFA500"><input type="radio" name="social_disruption" value="3"><span>3</span></label>
                    <label class="rating-label" style="background:#9ACD32"><input type="radio" name="social_disruption" value="4"><span>4</span></label>
                    <label class="rating-label" style="background:#008000"><input type="radio" name="social_disruption" value="5"><span>5</span></label>
                </div>
                </div>
            </div>

            <!-- AVERAGE & TOTAL SCORES -->
            <div class="mt-4 p-3 border rounded bg-light">
                <h6>Score Summary</h6>
                <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Average Impact Score</label>
                    <input type="text" id="average_impact_scores" class="form-control" readonly>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Total Score</label>
                    <input type="text" id="total_scores" class="form-control" readonly>
                </div>
                </div>
            </div>
            </div>

            <!-- NAVIGATION -->
            <div class="d-flex justify-content-start mt-4 gap-2">
            <button type="button" class="btn btn-secondary" id="prevBtn">Back</button>
            <button type="button" class="btn btn-primary" id="nextBtn">Next</button>
        </div>
        </form>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- FOOTER -->
<div id="footer"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Load Header & Footer -->
<script src="assets/js/common.js"></script>

<script src="assets/js/wizard-form.js"></script>

<script src="assets/js/doce_form.js"></script>

<script src="assets/js/negeri-daerah.js"></script>

<script>
initNegeriDaerah({
  negeriId: "negeri_drp",
  daerahId: "daerah_drp",
  lainWrapperId: "daerahLainWrapperDRP",
  lainInputId: "daerahLainDRP"
});

</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  initMap(
    'map_drp',
    'latitude_drp',
    'longitude_drp',
    'latDisplayDRP',
    'lngDisplayDRP',
    'cariLokasiDRP',
    'alamatLokasiDRP'
  );
});
</script>


<script src="assets/js/drp_form.js"></script>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</body>
</html>
